local a={["food"]=true,["seeds"]=true,["equip"]=true,["tool"]=true,["magic"]=true,["material"]=true,["gift"]=true,["base"]=true,["cooking"]=true,["props"]=true,["clothes"]=true,["farming"]=true,["puppet"]=true,["plant"]=true,["ore"]=true,["den"]=true,["building"]=true,["sculpture"]=true,["natural"]=true,["animal"]=true,["boss"]=true,["follower"]=true,["ruins"]=true,["event"]=false}local b={["buildgridplacer"]=true,["cave"]=true,["forest"]=true,["frontend"]=true,["global"]=true,["gridplacer"]=true,["hud"]=true,["ice_splash"]=true,["impact"]=true,["lanternlight"]=true,["sporecloud_overlay"]=true,["thunder_close"]=true,["thunder_far"]=true,["waterballoon_splash"]=true,["world"]=true}local c={MOON_ALTAR="MOON_ALTAR"}local function d(e,f)return e<f end;local function g(...)local h={}for i,j in ipairs({...})do for k=1,#j do table.insert(h,j[k])end end;return h end;local l=Class(function(self)self.beta=BRANCH~="release"and true or false;self.list={}self:Init()end)function l:Init()if self.beta then self.betalistpatch=require"TMI/list/itemlist_beta"end;local m=1;self.list["all"]={}for n,o in pairs(a)do local p="TMI/list/itemlist_"..n;self.list[n]=require(p)if self.betalistpatch and self.betalistpatch[n]and#self.betalistpatch[n]>0 then self.list[n]=g(self.list[n],self.betalistpatch[n])self:SortList(self.list[n])end;if o then for k=1,#self.list[n]do if not table.contains(self.list["all"],self.list[n][k])then self.list["all"][m]=self.list[n][k]m=m+1 end end end end;self:SortList(self.list["all"])self.list["others"]={}for i,o in pairs(PREFAB_SKINS)do if type(o)=="table"then for i,q in pairs(o)do b[q]=true end end end;for i,o in pairs(Prefabs)do if o.assets and self:CanAddOthers(o.name)then table.insert(self.list["others"],o.name)end end;self:SortList(self.list["others"])end;function l:GetList()return self:GetListbyName(TOOMANYITEMS.DATA.listinuse)end;function l:GetListbyName(r)if r and type(r)=="string"then if r=="custom"then return TOOMANYITEMS.DATA.customitems else return self.list[r]end else TOOMANYITEMS.DATA.listinuse="all"end;return self.list["all"]end;function l:Search()local s={}local t=self:GetList()local u=TOOMANYITEMS.DATA.search;for i,o in ipairs(t)do if string.find(o,u)then table.insert(s,o)end end;for n,o in pairs(STRINGS.NAMES)do local v=string.lower(n)if type(o)=="table"then if c[n]~=nil then o=o[c[n]]else local w,x=next(o)o=x end end;if table.contains(t,v)and string.find(string.lower(o),u)and not table.contains(s,v)then table.insert(s,v)end end;self:SortList(s)return s end;function l:SortList(t)table.sort(t,d)end;function l:CanAddOthers(u)local y=not table.contains(self.list["others"],u)and not table.contains(self.list["all"],u)and not table.contains(self.list["animal"],u)and not table.contains(self.list["boss"],u)and not table.contains(self.list["follower"],u)and not table.contains(self.list["ruins"],u)and not table.contains(self.list["event"],u)and not table.contains(self.list["puppet"],u)and not table.contains(self.list["plant"],u)and not table.contains(self.list["ore"],u)and not table.contains(self.list["den"],u)and not table.contains(self.list["building"],u)and not table.contains(self.list["sculpture"],u)and not table.contains(self.list["natural"],u)and not string.find(u,"MOD_")and not string.find(u,"_placer")and not string.find(u,"_builder")and not string.find(u,"_classified")and not string.find(u,"_network")and not string.find(u,"_lvl")and not string.find(u,"_fx")and not string.find(u,"blueprint")and not string.find(u,"buff")and not string.find(u,"map")and not string.find(u,"workshop")if not b[u]and y then return true end;return false end;return l
